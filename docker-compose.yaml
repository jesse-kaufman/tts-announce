services:
  api:
    build:
      context: .
      dockerfile: docker/Dockerfile
    container_name: tts-announce
    restart: unless-stopped
    ports:
      - 8083:8083
    networks:
      - piper
    environment:
      - PIPER_HOST=piper
      - PIPER_PORT=10200
      - CHIMES_DIR=/chimes
      - CACHE_DIR=/cache
      - CACHE_TTL_HOURS=24
      - PORT=8083
    volumes:
      - ./data/chimes:/chimes:ro
      - ./data/cache:/cache

networks:
  piper:
    external: true
